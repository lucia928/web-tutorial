# 指令相关

## v-if与v-for哪个优先级更高？

- `vue2 `中，`v-for` 的优先级高于 `v-if`。
- `vue3`中，`v-if` 的优先级高于 `v-for`，且不能放在同一个元素上。

### 注意事项

- 不要把两个指令用在同一个元素上，每次渲染都会先循环再进行条件判断，带来性能方面的浪费；`vue3`中报错，绑定的表达式属性可能还未被定义。
- 可以在外层嵌套 `template`，在这一层进行`v-if`判断，然后在内部进行 `v-for`循环。
- 如果条件出现在循环内部，可通过计算属性`computed`提前过滤掉那些不需要显示的项

## v-if和v-show的使用

- **共同点：** 都能控制元素在页面是否显示。
- **不同点：** 
  - **控制手段不同：** `v-show`通过控制样式`display:none`来实现隐藏，`dom元素`依然在；`v-for`显示、隐藏是直接将整个`dom元素`添加或者移除。
  - **编译过程不同：** `v-show`只是简单地基于css切换，不会触发组件的生命周期变化；`v-if`切换有一个局部编译/卸载的过程，切换过程中会销毁或重建内部的事件监听和子组件。
  - **编译条件不同：** `v-show`不管表达式为真或假，都会渲染；`v-if`是真正的条件渲染，它会确保在切换过程中条件块内的事件监听器和子组件适当地被销毁和重建。渲染条件为真时才去渲染。
  - **性能消耗：** `v-show`有更高的初始化渲染消耗。

- **使用场景：** 如果需要频繁切换，使用`v-show`较好；如果条件很少改变，使用`v-if`较好
- **工作中遇到的坑：** 在表单中使用，有个单选控制子表单，前人估计是基于性能考虑（单选项可能频繁切换），使用了`v-show`控制子表单是否展示，在未填写子表单的情况下，切换为不展示，点击提交会遍历校验所有子表单，导致此子表单未展示到页面上，但是报错提示表单未填写完整。所以使用`v-show`还是`v-if`需要根据实际业务场景判断，切勿直接套公式！